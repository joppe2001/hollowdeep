//! Item templates for data-driven item creation
//!
//! These templates are loaded from RON files and used to generate items.

use serde::{Deserialize, Serialize};
use crate::items::{
    Item, ItemId, ItemCategory, Rarity, EquipSlot, WeaponType, ArmorType,
    ConsumableEffect, Affix, AffixType,
    synergies::SynergyTag,
};

/// A template for creating items from external data
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ItemTemplate {
    /// Unique template ID for reference
    pub id: String,
    /// Base name of the item
    pub name: String,
    /// Description/flavor text
    pub description: String,
    /// Item category
    pub category: ItemCategory,
    /// Default rarity (can be upgraded by generation)
    pub base_rarity: Rarity,
    /// Equipment slot (if equippable)
    pub equip_slot: Option<EquipSlot>,
    /// Weapon type (if weapon)
    pub weapon_type: Option<WeaponType>,
    /// Armor type (if armor)
    pub armor_type: Option<ArmorType>,
    /// Consumable effect (if consumable)
    pub consumable_effect: Option<ConsumableEffect>,
    /// Base damage (weapons)
    pub base_damage: i32,
    /// Base armor (armor)
    pub base_armor: i32,
    /// Built-in affixes (for unique items)
    pub affixes: Vec<AffixDef>,
    /// Synergy tags for combo bonuses
    pub synergy_tags: Vec<SynergyTag>,
    /// Grid size for inventory (width, height)
    pub grid_size: (u8, u8),
    /// Display glyph
    pub glyph: char,
    /// Max stack size (1 for non-stackable)
    pub max_stack: u32,
    /// Base gold value
    pub value: u32,
}

/// Affix definition for templates
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct AffixDef {
    pub affix_type: AffixType,
    pub value: i32,
}

impl ItemTemplate {
    /// Create an Item instance from this template
    pub fn create_item(&self, id: ItemId) -> Item {
        let mut item = Item::new(id, self.name.clone(), self.category);
        item.description = self.description.clone();
        item.rarity = self.base_rarity;
        item.equip_slot = self.equip_slot;
        item.weapon_type = self.weapon_type;
        item.armor_type = self.armor_type;
        item.consumable_effect = self.consumable_effect;
        item.base_damage = self.base_damage;
        item.base_armor = self.base_armor;
        item.synergy_tags = self.synergy_tags.clone();
        item.grid_size = self.grid_size;
        item.glyph = self.glyph;
        item.max_stack = self.max_stack;
        item.value = self.value;

        // Add built-in affixes
        for affix_def in &self.affixes {
            item.affixes.push(Affix {
                affix_type: affix_def.affix_type,
                value: affix_def.value,
            });
        }

        // Generate name with affixes if any
        if !item.affixes.is_empty() {
            item.generate_name();
        }

        item
    }
}

/// Collection of item templates
#[derive(Debug, Clone, Default, Serialize, Deserialize)]
pub struct ItemTemplates {
    pub templates: Vec<ItemTemplate>,
}

impl ItemTemplates {
    /// Find a template by ID
    pub fn find(&self, id: &str) -> Option<&ItemTemplate> {
        self.templates.iter().find(|t| t.id == id)
    }

    /// Get all weapon templates
    pub fn weapons(&self) -> Vec<&ItemTemplate> {
        self.templates.iter()
            .filter(|t| t.category == ItemCategory::Weapon)
            .collect()
    }

    /// Get all armor templates
    pub fn armor(&self) -> Vec<&ItemTemplate> {
        self.templates.iter()
            .filter(|t| t.category == ItemCategory::Armor)
            .collect()
    }

    /// Get all consumable templates
    pub fn consumables(&self) -> Vec<&ItemTemplate> {
        self.templates.iter()
            .filter(|t| t.category == ItemCategory::Consumable)
            .collect()
    }

    /// Get all accessory templates
    pub fn accessories(&self) -> Vec<&ItemTemplate> {
        self.templates.iter()
            .filter(|t| t.category == ItemCategory::Accessory)
            .collect()
    }
}

/// Create default item templates (hardcoded fallback)
pub fn default_item_templates() -> ItemTemplates {
    ItemTemplates {
        templates: vec![
            // === WEAPONS ===
            ItemTemplate {
                id: "iron_sword".to_string(),
                name: "Iron Sword".to_string(),
                description: "A sturdy iron blade.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Common,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Sword),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Sword.base_damage(),
                base_armor: 0,
                affixes: vec![],
                synergy_tags: vec![SynergyTag::Knight],
                grid_size: (1, 2),
                glyph: '/',
                max_stack: 1,
                value: 50,
            },
            ItemTemplate {
                id: "rusty_dagger".to_string(),
                name: "Rusty Dagger".to_string(),
                description: "A worn dagger, still sharp enough.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Common,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Dagger),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Dagger.base_damage() - 1,
                base_armor: 0,
                affixes: vec![],
                synergy_tags: vec![SynergyTag::Shadow],
                grid_size: (1, 1),
                glyph: '-',
                max_stack: 1,
                value: 15,
            },
            ItemTemplate {
                id: "battle_axe".to_string(),
                name: "Battle Axe".to_string(),
                description: "A heavy two-handed axe.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Common,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Axe),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Axe.base_damage(),
                base_armor: 0,
                affixes: vec![],
                synergy_tags: vec![SynergyTag::TwoHanded],
                grid_size: (2, 2),
                glyph: 'P',
                max_stack: 1,
                value: 80,
            },
            ItemTemplate {
                id: "flame_sword".to_string(),
                name: "Flame Sword".to_string(),
                description: "A blade wreathed in eternal flame.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Sword),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Sword.base_damage() + 2,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::FireDamage, value: 4 }],
                synergy_tags: vec![SynergyTag::Fire],
                grid_size: (1, 2),
                glyph: '/',
                max_stack: 1,
                value: 120,
            },
            ItemTemplate {
                id: "frost_dagger".to_string(),
                name: "Frost Dagger".to_string(),
                description: "Bitter cold radiates from this blade.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Dagger),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Dagger.base_damage() + 1,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::IceDamage, value: 3 }],
                synergy_tags: vec![SynergyTag::Ice, SynergyTag::Shadow],
                grid_size: (1, 1),
                glyph: '-',
                max_stack: 1,
                value: 90,
            },
            ItemTemplate {
                id: "ritual_dagger".to_string(),
                name: "Ritual Dagger".to_string(),
                description: "A dagger used in dark rituals.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Dagger),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Dagger.base_damage() + 2,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::LifeSteal, value: 5 }],
                synergy_tags: vec![SynergyTag::Cultist],
                grid_size: (1, 1),
                glyph: '-',
                max_stack: 1,
                value: 85,
            },
            ItemTemplate {
                id: "venom_blade".to_string(),
                name: "Venom Blade".to_string(),
                description: "Poison drips from this cruel blade.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Sword),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Sword.base_damage(),
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::PoisonDamage, value: 5 }],
                synergy_tags: vec![SynergyTag::Poison],
                grid_size: (1, 2),
                glyph: '/',
                max_stack: 1,
                value: 110,
            },
            // Berserker weapons
            ItemTemplate {
                id: "berserker_axe".to_string(),
                name: "Berserker Axe".to_string(),
                description: "A brutal axe that feeds on rage.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Axe),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Axe.base_damage() + 3,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::BonusDamage, value: 4 }],
                synergy_tags: vec![SynergyTag::Berserker, SynergyTag::TwoHanded],
                grid_size: (2, 2),
                glyph: 'P',
                max_stack: 1,
                value: 120,
            },
            ItemTemplate {
                id: "bloodrage_cleaver".to_string(),
                name: "Bloodrage Cleaver".to_string(),
                description: "Grows stronger as your blood spills.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Rare,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Axe),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Axe.base_damage() + 5,
                base_armor: 0,
                affixes: vec![
                    AffixDef { affix_type: AffixType::BonusDamage, value: 6 },
                    AffixDef { affix_type: AffixType::LifeSteal, value: 8 },
                ],
                synergy_tags: vec![SynergyTag::Berserker, SynergyTag::Vampire],
                grid_size: (2, 2),
                glyph: 'P',
                max_stack: 1,
                value: 200,
            },
            // Arcane weapons
            ItemTemplate {
                id: "arcane_wand".to_string(),
                name: "Arcane Wand".to_string(),
                description: "Channels pure magical energy.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Dagger),
                armor_type: None,
                consumable_effect: None,
                base_damage: 4,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::BonusMP, value: 15 }],
                synergy_tags: vec![SynergyTag::Arcane],
                grid_size: (1, 2),
                glyph: '|',
                max_stack: 1,
                value: 95,
            },
            ItemTemplate {
                id: "staff_of_storms".to_string(),
                name: "Staff of Storms".to_string(),
                description: "Crackles with lightning energy.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Rare,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Staff),
                armor_type: None,
                consumable_effect: None,
                base_damage: 6,
                base_armor: 0,
                affixes: vec![
                    AffixDef { affix_type: AffixType::LightningDamage, value: 8 },
                    AffixDef { affix_type: AffixType::BonusMP, value: 20 },
                ],
                synergy_tags: vec![SynergyTag::Arcane, SynergyTag::Lightning],
                grid_size: (1, 3),
                glyph: '|',
                max_stack: 1,
                value: 180,
            },
            // Assassin weapons
            ItemTemplate {
                id: "assassin_blade".to_string(),
                name: "Assassin's Blade".to_string(),
                description: "Strikes at vital points with deadly precision.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Dagger),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Dagger.base_damage() + 2,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::BonusCritChance, value: 12 }],
                synergy_tags: vec![SynergyTag::Assassin, SynergyTag::Shadow],
                grid_size: (1, 1),
                glyph: '-',
                max_stack: 1,
                value: 100,
            },
            ItemTemplate {
                id: "nightfang".to_string(),
                name: "Nightfang".to_string(),
                description: "A blade that drinks deep from mortal wounds.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Rare,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Dagger),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Dagger.base_damage() + 4,
                base_armor: 0,
                affixes: vec![
                    AffixDef { affix_type: AffixType::BonusCritChance, value: 18 },
                    AffixDef { affix_type: AffixType::LifeSteal, value: 6 },
                ],
                synergy_tags: vec![SynergyTag::Assassin, SynergyTag::Vampire],
                grid_size: (1, 1),
                glyph: '-',
                max_stack: 1,
                value: 185,
            },
            // Guardian weapons
            ItemTemplate {
                id: "guardian_mace".to_string(),
                name: "Guardian's Mace".to_string(),
                description: "A stalwart defender's weapon.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Mace),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Mace.base_damage(),
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::BonusArmor, value: 5 }],
                synergy_tags: vec![SynergyTag::Guardian, SynergyTag::Knight],
                grid_size: (1, 2),
                glyph: '!',
                max_stack: 1,
                value: 90,
            },
            // Vampire weapons
            ItemTemplate {
                id: "vampiric_blade".to_string(),
                name: "Vampiric Blade".to_string(),
                description: "Drains life force from its victims.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Rare,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Sword),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Sword.base_damage() + 2,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::LifeSteal, value: 12 }],
                synergy_tags: vec![SynergyTag::Vampire, SynergyTag::Corruption],
                grid_size: (1, 2),
                glyph: '/',
                max_stack: 1,
                value: 175,
            },
            // Beast weapons
            ItemTemplate {
                id: "wolf_fang".to_string(),
                name: "Wolf Fang".to_string(),
                description: "A savage blade carved from a dire wolf's fang.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Dagger),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Dagger.base_damage() + 3,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::BonusDamage, value: 3 }],
                synergy_tags: vec![SynergyTag::Beast],
                grid_size: (1, 1),
                glyph: '-',
                max_stack: 1,
                value: 85,
            },
            ItemTemplate {
                id: "bear_claw".to_string(),
                name: "Bear Claw".to_string(),
                description: "Massive claws from an ancient cave bear.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Rare,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Axe),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Axe.base_damage() + 4,
                base_armor: 0,
                affixes: vec![
                    AffixDef { affix_type: AffixType::BonusDamage, value: 5 },
                    AffixDef { affix_type: AffixType::BonusHP, value: 15 },
                ],
                synergy_tags: vec![SynergyTag::Beast, SynergyTag::TwoHanded],
                grid_size: (2, 2),
                glyph: 'P',
                max_stack: 1,
                value: 170,
            },
            // Holy weapons
            ItemTemplate {
                id: "blessed_mace".to_string(),
                name: "Blessed Mace".to_string(),
                description: "Radiates holy light.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Mace),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Mace.base_damage() + 2,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::BonusHP, value: 10 }],
                synergy_tags: vec![SynergyTag::Holy, SynergyTag::Guardian],
                grid_size: (1, 2),
                glyph: '!',
                max_stack: 1,
                value: 105,
            },
            // Epic/Legendary weapons
            ItemTemplate {
                id: "inferno_blade".to_string(),
                name: "Inferno Blade".to_string(),
                description: "Burns with the fury of a thousand suns.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Epic,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Sword),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Sword.base_damage() + 8,
                base_armor: 0,
                affixes: vec![
                    AffixDef { affix_type: AffixType::FireDamage, value: 12 },
                    AffixDef { affix_type: AffixType::BonusDamage, value: 6 },
                ],
                synergy_tags: vec![SynergyTag::Fire, SynergyTag::Berserker],
                grid_size: (1, 2),
                glyph: '/',
                max_stack: 1,
                value: 350,
            },
            ItemTemplate {
                id: "frostmourne".to_string(),
                name: "Frostmourne".to_string(),
                description: "A cursed blade of eternal winter.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Epic,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Sword),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Sword.base_damage() + 7,
                base_armor: 0,
                affixes: vec![
                    AffixDef { affix_type: AffixType::IceDamage, value: 10 },
                    AffixDef { affix_type: AffixType::LifeSteal, value: 8 },
                ],
                synergy_tags: vec![SynergyTag::Ice, SynergyTag::Corruption],
                grid_size: (1, 2),
                glyph: '/',
                max_stack: 1,
                value: 380,
            },
            ItemTemplate {
                id: "soulreaper".to_string(),
                name: "Soulreaper".to_string(),
                description: "Harvests the souls of the fallen.".to_string(),
                category: ItemCategory::Weapon,
                base_rarity: Rarity::Legendary,
                equip_slot: Some(EquipSlot::MainHand),
                weapon_type: Some(WeaponType::Axe),
                armor_type: None,
                consumable_effect: None,
                base_damage: WeaponType::Axe.base_damage() + 12,
                base_armor: 0,
                affixes: vec![
                    AffixDef { affix_type: AffixType::BonusDamage, value: 10 },
                    AffixDef { affix_type: AffixType::LifeSteal, value: 15 },
                    AffixDef { affix_type: AffixType::BonusCritChance, value: 12 },
                ],
                synergy_tags: vec![SynergyTag::Corruption, SynergyTag::Vampire, SynergyTag::TwoHanded],
                grid_size: (2, 3),
                glyph: 'P',
                max_stack: 1,
                value: 500,
            },

            // === ARMOR ===
            ItemTemplate {
                id: "leather_armor".to_string(),
                name: "Leather Armor".to_string(),
                description: "Supple leather armor.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Common,
                equip_slot: Some(EquipSlot::Body),
                weapon_type: None,
                armor_type: Some(ArmorType::Leather),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Leather.base_armor(EquipSlot::Body),
                affixes: vec![],
                synergy_tags: vec![SynergyTag::Shadow],
                grid_size: (2, 2),
                glyph: '[',
                max_stack: 1,
                value: 60,
            },
            ItemTemplate {
                id: "chain_helm".to_string(),
                name: "Chain Helm".to_string(),
                description: "A chain mail helmet.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Common,
                equip_slot: Some(EquipSlot::Head),
                weapon_type: None,
                armor_type: Some(ArmorType::Chain),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Chain.base_armor(EquipSlot::Head),
                affixes: vec![],
                synergy_tags: vec![SynergyTag::Knight],
                grid_size: (1, 1),
                glyph: '^',
                max_stack: 1,
                value: 45,
            },
            ItemTemplate {
                id: "cultist_robe".to_string(),
                name: "Cultist Robe".to_string(),
                description: "Dark robes worn by the blood cult.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Body),
                weapon_type: None,
                armor_type: Some(ArmorType::Cloth),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Cloth.base_armor(EquipSlot::Body),
                affixes: vec![],
                synergy_tags: vec![SynergyTag::Cultist, SynergyTag::Corruption],
                grid_size: (2, 2),
                glyph: '[',
                max_stack: 1,
                value: 75,
            },
            ItemTemplate {
                id: "knight_helm".to_string(),
                name: "Knight's Helm".to_string(),
                description: "A knight's sturdy helm.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Head),
                weapon_type: None,
                armor_type: Some(ArmorType::Plate),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Plate.base_armor(EquipSlot::Head),
                affixes: vec![],
                synergy_tags: vec![SynergyTag::Knight],
                grid_size: (1, 1),
                glyph: '^',
                max_stack: 1,
                value: 100,
            },
            ItemTemplate {
                id: "knight_plate".to_string(),
                name: "Knight's Plate".to_string(),
                description: "Heavy plate armor worn by knights.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Rare,
                equip_slot: Some(EquipSlot::Body),
                weapon_type: None,
                armor_type: Some(ArmorType::Plate),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Plate.base_armor(EquipSlot::Body),
                affixes: vec![AffixDef { affix_type: AffixType::BonusHP, value: 15 }],
                synergy_tags: vec![SynergyTag::Knight],
                grid_size: (2, 3),
                glyph: '[',
                max_stack: 1,
                value: 180,
            },
            ItemTemplate {
                id: "shadow_cloak".to_string(),
                name: "Shadow Cloak".to_string(),
                description: "A cloak that drinks in light.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Body),
                weapon_type: None,
                armor_type: Some(ArmorType::Cloth),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Cloth.base_armor(EquipSlot::Body) + 1,
                affixes: vec![AffixDef { affix_type: AffixType::BonusDodge, value: 8 }],
                synergy_tags: vec![SynergyTag::Shadow],
                grid_size: (2, 2),
                glyph: '(',
                max_stack: 1,
                value: 95,
            },
            ItemTemplate {
                id: "corrupted_gauntlets".to_string(),
                name: "Corrupted Gauntlets".to_string(),
                description: "Gauntlets stained with dark power.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Hands),
                weapon_type: None,
                armor_type: Some(ArmorType::Leather),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Leather.base_armor(EquipSlot::Hands) + 2,
                affixes: vec![AffixDef { affix_type: AffixType::BonusDamage, value: 3 }],
                synergy_tags: vec![SynergyTag::Corruption],
                grid_size: (1, 1),
                glyph: ']',
                max_stack: 1,
                value: 70,
            },
            ItemTemplate {
                id: "leather_boots".to_string(),
                name: "Leather Boots".to_string(),
                description: "Simple leather boots.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Common,
                equip_slot: Some(EquipSlot::Feet),
                weapon_type: None,
                armor_type: Some(ArmorType::Leather),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Leather.base_armor(EquipSlot::Feet),
                affixes: vec![],
                synergy_tags: vec![],
                grid_size: (1, 1),
                glyph: '"',
                max_stack: 1,
                value: 35,
            },
            ItemTemplate {
                id: "chain_boots".to_string(),
                name: "Chain Boots".to_string(),
                description: "Chain mail boots.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Common,
                equip_slot: Some(EquipSlot::Feet),
                weapon_type: None,
                armor_type: Some(ArmorType::Chain),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Chain.base_armor(EquipSlot::Feet),
                affixes: vec![],
                synergy_tags: vec![SynergyTag::Knight],
                grid_size: (1, 1),
                glyph: '"',
                max_stack: 1,
                value: 55,
            },
            ItemTemplate {
                id: "leather_gloves".to_string(),
                name: "Leather Gloves".to_string(),
                description: "Basic leather gloves.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Common,
                equip_slot: Some(EquipSlot::Hands),
                weapon_type: None,
                armor_type: Some(ArmorType::Leather),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Leather.base_armor(EquipSlot::Hands),
                affixes: vec![],
                synergy_tags: vec![],
                grid_size: (1, 1),
                glyph: ']',
                max_stack: 1,
                value: 30,
            },
            ItemTemplate {
                id: "wooden_shield".to_string(),
                name: "Wooden Shield".to_string(),
                description: "A simple wooden shield.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Common,
                equip_slot: Some(EquipSlot::OffHand),
                weapon_type: None,
                armor_type: Some(ArmorType::Leather),
                consumable_effect: None,
                base_damage: 0,
                base_armor: 3,
                affixes: vec![],
                synergy_tags: vec![],
                grid_size: (2, 2),
                glyph: ')',
                max_stack: 1,
                value: 40,
            },
            ItemTemplate {
                id: "iron_shield".to_string(),
                name: "Iron Shield".to_string(),
                description: "A sturdy iron shield.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Common,
                equip_slot: Some(EquipSlot::OffHand),
                weapon_type: None,
                armor_type: Some(ArmorType::Chain),
                consumable_effect: None,
                base_damage: 0,
                base_armor: 5,
                affixes: vec![],
                synergy_tags: vec![SynergyTag::Knight],
                grid_size: (2, 2),
                glyph: ')',
                max_stack: 1,
                value: 70,
            },
            // Berserker armor
            ItemTemplate {
                id: "berserker_harness".to_string(),
                name: "Berserker's Harness".to_string(),
                description: "Minimal armor that doesn't impede a berserker's fury.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Body),
                weapon_type: None,
                armor_type: Some(ArmorType::Leather),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Leather.base_armor(EquipSlot::Body) - 1,
                affixes: vec![AffixDef { affix_type: AffixType::BonusDamage, value: 4 }],
                synergy_tags: vec![SynergyTag::Berserker],
                grid_size: (2, 2),
                glyph: '[',
                max_stack: 1,
                value: 85,
            },
            // Arcane armor
            ItemTemplate {
                id: "arcane_robes".to_string(),
                name: "Arcane Robes".to_string(),
                description: "Robes woven with magical threads.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Body),
                weapon_type: None,
                armor_type: Some(ArmorType::Cloth),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Cloth.base_armor(EquipSlot::Body),
                affixes: vec![AffixDef { affix_type: AffixType::BonusMP, value: 25 }],
                synergy_tags: vec![SynergyTag::Arcane],
                grid_size: (2, 2),
                glyph: '[',
                max_stack: 1,
                value: 95,
            },
            ItemTemplate {
                id: "mage_hat".to_string(),
                name: "Mage's Hat".to_string(),
                description: "A pointed hat crackling with energy.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Head),
                weapon_type: None,
                armor_type: Some(ArmorType::Cloth),
                consumable_effect: None,
                base_damage: 0,
                base_armor: 1,
                affixes: vec![AffixDef { affix_type: AffixType::BonusMP, value: 15 }],
                synergy_tags: vec![SynergyTag::Arcane],
                grid_size: (1, 1),
                glyph: '^',
                max_stack: 1,
                value: 65,
            },
            // Assassin armor
            ItemTemplate {
                id: "assassin_garb".to_string(),
                name: "Assassin's Garb".to_string(),
                description: "Dark clothing for silent kills.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Body),
                weapon_type: None,
                armor_type: Some(ArmorType::Leather),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Leather.base_armor(EquipSlot::Body),
                affixes: vec![AffixDef { affix_type: AffixType::BonusCritChance, value: 8 }],
                synergy_tags: vec![SynergyTag::Assassin, SynergyTag::Shadow],
                grid_size: (2, 2),
                glyph: '[',
                max_stack: 1,
                value: 90,
            },
            // Guardian armor
            ItemTemplate {
                id: "guardian_plate".to_string(),
                name: "Guardian's Plate".to_string(),
                description: "Heavy armor for those who protect others.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Rare,
                equip_slot: Some(EquipSlot::Body),
                weapon_type: None,
                armor_type: Some(ArmorType::Plate),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Plate.base_armor(EquipSlot::Body) + 3,
                affixes: vec![AffixDef { affix_type: AffixType::BonusHP, value: 25 }],
                synergy_tags: vec![SynergyTag::Guardian, SynergyTag::Knight],
                grid_size: (2, 3),
                glyph: '[',
                max_stack: 1,
                value: 220,
            },
            ItemTemplate {
                id: "tower_shield".to_string(),
                name: "Tower Shield".to_string(),
                description: "A massive shield that covers the entire body.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Rare,
                equip_slot: Some(EquipSlot::OffHand),
                weapon_type: None,
                armor_type: Some(ArmorType::Plate),
                consumable_effect: None,
                base_damage: 0,
                base_armor: 10,
                affixes: vec![AffixDef { affix_type: AffixType::BonusHP, value: 15 }],
                synergy_tags: vec![SynergyTag::Guardian],
                grid_size: (2, 3),
                glyph: ')',
                max_stack: 1,
                value: 180,
            },
            // Vampire armor
            ItemTemplate {
                id: "vampire_cloak".to_string(),
                name: "Vampire's Cloak".to_string(),
                description: "A billowing cloak that thirsts for blood.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Rare,
                equip_slot: Some(EquipSlot::Body),
                weapon_type: None,
                armor_type: Some(ArmorType::Cloth),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Cloth.base_armor(EquipSlot::Body) + 2,
                affixes: vec![AffixDef { affix_type: AffixType::LifeSteal, value: 10 }],
                synergy_tags: vec![SynergyTag::Vampire, SynergyTag::Corruption],
                grid_size: (2, 2),
                glyph: '(',
                max_stack: 1,
                value: 165,
            },
            // Beast armor
            ItemTemplate {
                id: "wolfskin_armor".to_string(),
                name: "Wolfskin Armor".to_string(),
                description: "Armor made from dire wolf pelts.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Body),
                weapon_type: None,
                armor_type: Some(ArmorType::Leather),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Leather.base_armor(EquipSlot::Body) + 1,
                affixes: vec![AffixDef { affix_type: AffixType::BonusHP, value: 10 }],
                synergy_tags: vec![SynergyTag::Beast],
                grid_size: (2, 2),
                glyph: '[',
                max_stack: 1,
                value: 85,
            },
            ItemTemplate {
                id: "bearskin_cloak".to_string(),
                name: "Bearskin Cloak".to_string(),
                description: "A thick cloak of bear fur for brutal winters.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Rare,
                equip_slot: Some(EquipSlot::Body),
                weapon_type: None,
                armor_type: Some(ArmorType::Leather),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Leather.base_armor(EquipSlot::Body) + 3,
                affixes: vec![
                    AffixDef { affix_type: AffixType::BonusHP, value: 20 },
                    AffixDef { affix_type: AffixType::BonusDamage, value: 3 },
                ],
                synergy_tags: vec![SynergyTag::Beast, SynergyTag::Berserker],
                grid_size: (2, 2),
                glyph: '(',
                max_stack: 1,
                value: 175,
            },
            // Holy armor
            ItemTemplate {
                id: "holy_vestments".to_string(),
                name: "Holy Vestments".to_string(),
                description: "Sacred garments blessed by the divine.".to_string(),
                category: ItemCategory::Armor,
                base_rarity: Rarity::Rare,
                equip_slot: Some(EquipSlot::Body),
                weapon_type: None,
                armor_type: Some(ArmorType::Cloth),
                consumable_effect: None,
                base_damage: 0,
                base_armor: ArmorType::Cloth.base_armor(EquipSlot::Body) + 2,
                affixes: vec![
                    AffixDef { affix_type: AffixType::BonusHP, value: 20 },
                    AffixDef { affix_type: AffixType::BonusMP, value: 15 },
                ],
                synergy_tags: vec![SynergyTag::Holy, SynergyTag::Guardian],
                grid_size: (2, 2),
                glyph: '[',
                max_stack: 1,
                value: 190,
            },

            // === ACCESSORIES ===
            ItemTemplate {
                id: "bone_ring".to_string(),
                name: "Bone Ring".to_string(),
                description: "A ring carved from ancient bone.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Common,
                equip_slot: Some(EquipSlot::Ring1),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![],
                synergy_tags: vec![],
                grid_size: (1, 1),
                glyph: 'o',
                max_stack: 1,
                value: 50,
            },
            ItemTemplate {
                id: "copper_amulet".to_string(),
                name: "Copper Amulet".to_string(),
                description: "A tarnished copper amulet.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Common,
                equip_slot: Some(EquipSlot::Amulet),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![],
                synergy_tags: vec![],
                grid_size: (1, 1),
                glyph: '*',
                max_stack: 1,
                value: 45,
            },
            ItemTemplate {
                id: "silver_ring".to_string(),
                name: "Silver Ring".to_string(),
                description: "A polished silver ring.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Ring1),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![],
                synergy_tags: vec![SynergyTag::Knight],
                grid_size: (1, 1),
                glyph: 'o',
                max_stack: 1,
                value: 80,
            },
            // Synergy-themed accessories
            ItemTemplate {
                id: "berserker_pendant".to_string(),
                name: "Berserker's Pendant".to_string(),
                description: "A blood-red gem that pulses with rage.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Amulet),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::BonusDamage, value: 3 }],
                synergy_tags: vec![SynergyTag::Berserker],
                grid_size: (1, 1),
                glyph: '*',
                max_stack: 1,
                value: 85,
            },
            ItemTemplate {
                id: "arcane_focus".to_string(),
                name: "Arcane Focus".to_string(),
                description: "A crystal that amplifies magical energy.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Amulet),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::BonusMP, value: 20 }],
                synergy_tags: vec![SynergyTag::Arcane],
                grid_size: (1, 1),
                glyph: '*',
                max_stack: 1,
                value: 90,
            },
            ItemTemplate {
                id: "assassins_signet".to_string(),
                name: "Assassin's Signet".to_string(),
                description: "A dark ring worn by master killers.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Ring1),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::BonusCritChance, value: 10 }],
                synergy_tags: vec![SynergyTag::Assassin],
                grid_size: (1, 1),
                glyph: 'o',
                max_stack: 1,
                value: 95,
            },
            ItemTemplate {
                id: "guardian_seal".to_string(),
                name: "Guardian's Seal".to_string(),
                description: "A seal marking the wearer as a protector.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Amulet),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::BonusHP, value: 15 }],
                synergy_tags: vec![SynergyTag::Guardian],
                grid_size: (1, 1),
                glyph: '*',
                max_stack: 1,
                value: 85,
            },
            ItemTemplate {
                id: "vampire_tooth".to_string(),
                name: "Vampire's Tooth".to_string(),
                description: "A fang that drains life with each strike.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Rare,
                equip_slot: Some(EquipSlot::Amulet),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::LifeSteal, value: 8 }],
                synergy_tags: vec![SynergyTag::Vampire],
                grid_size: (1, 1),
                glyph: '*',
                max_stack: 1,
                value: 150,
            },
            ItemTemplate {
                id: "beast_fang_necklace".to_string(),
                name: "Beast Fang Necklace".to_string(),
                description: "A necklace of fangs from various predators.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Amulet),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::BonusDamage, value: 2 }],
                synergy_tags: vec![SynergyTag::Beast],
                grid_size: (1, 1),
                glyph: '*',
                max_stack: 1,
                value: 75,
            },
            ItemTemplate {
                id: "ring_of_fire".to_string(),
                name: "Ring of Fire".to_string(),
                description: "Burns with eternal flame.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Ring1),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::FireDamage, value: 4 }],
                synergy_tags: vec![SynergyTag::Fire],
                grid_size: (1, 1),
                glyph: 'o',
                max_stack: 1,
                value: 90,
            },
            ItemTemplate {
                id: "frost_band".to_string(),
                name: "Frost Band".to_string(),
                description: "Cold to the touch, deadly to enemies.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Ring1),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::IceDamage, value: 4 }],
                synergy_tags: vec![SynergyTag::Ice],
                grid_size: (1, 1),
                glyph: 'o',
                max_stack: 1,
                value: 90,
            },
            ItemTemplate {
                id: "poison_ring".to_string(),
                name: "Venomous Ring".to_string(),
                description: "Contains a reservoir of deadly poison.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Uncommon,
                equip_slot: Some(EquipSlot::Ring1),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::PoisonDamage, value: 4 }],
                synergy_tags: vec![SynergyTag::Poison],
                grid_size: (1, 1),
                glyph: 'o',
                max_stack: 1,
                value: 90,
            },
            ItemTemplate {
                id: "holy_symbol".to_string(),
                name: "Holy Symbol".to_string(),
                description: "A sacred symbol of divine protection.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Rare,
                equip_slot: Some(EquipSlot::Amulet),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![
                    AffixDef { affix_type: AffixType::BonusHP, value: 15 },
                    AffixDef { affix_type: AffixType::BonusArmor, value: 3 },
                ],
                synergy_tags: vec![SynergyTag::Holy, SynergyTag::Guardian],
                grid_size: (1, 1),
                glyph: '*',
                max_stack: 1,
                value: 160,
            },
            ItemTemplate {
                id: "corrupted_eye".to_string(),
                name: "Corrupted Eye".to_string(),
                description: "Sees through the veil of darkness.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Rare,
                equip_slot: Some(EquipSlot::Amulet),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![AffixDef { affix_type: AffixType::BonusDamage, value: 5 }],
                synergy_tags: vec![SynergyTag::Corruption, SynergyTag::Shadow],
                grid_size: (1, 1),
                glyph: '*',
                max_stack: 1,
                value: 145,
            },
            // Epic/Legendary accessories
            ItemTemplate {
                id: "ring_of_power".to_string(),
                name: "Ring of Power".to_string(),
                description: "Grants tremendous strength to the wearer.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Epic,
                equip_slot: Some(EquipSlot::Ring1),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![
                    AffixDef { affix_type: AffixType::BonusDamage, value: 8 },
                    AffixDef { affix_type: AffixType::BonusCritChance, value: 10 },
                ],
                synergy_tags: vec![SynergyTag::Berserker, SynergyTag::Corruption],
                grid_size: (1, 1),
                glyph: 'o',
                max_stack: 1,
                value: 300,
            },
            ItemTemplate {
                id: "amulet_of_immortality".to_string(),
                name: "Amulet of Immortality".to_string(),
                description: "Grants eternal life... at a price.".to_string(),
                category: ItemCategory::Accessory,
                base_rarity: Rarity::Legendary,
                equip_slot: Some(EquipSlot::Amulet),
                weapon_type: None,
                armor_type: None,
                consumable_effect: None,
                base_damage: 0,
                base_armor: 0,
                affixes: vec![
                    AffixDef { affix_type: AffixType::BonusHP, value: 50 },
                    AffixDef { affix_type: AffixType::LifeSteal, value: 12 },
                ],
                synergy_tags: vec![SynergyTag::Vampire, SynergyTag::Corruption],
                grid_size: (1, 1),
                glyph: '*',
                max_stack: 1,
                value: 450,
            },

            // === CONSUMABLES ===
            ItemTemplate {
                id: "health_potion".to_string(),
                name: "Health Potion".to_string(),
                description: "Restores 30 HP.".to_string(),
                category: ItemCategory::Consumable,
                base_rarity: Rarity::Common,
                equip_slot: None,
                weapon_type: None,
                armor_type: None,
                consumable_effect: Some(ConsumableEffect::HealHP(30)),
                base_damage: 0,
                base_armor: 0,
                affixes: vec![],
                synergy_tags: vec![],
                grid_size: (1, 1),
                glyph: '!',
                max_stack: 10,
                value: 25,
            },
            ItemTemplate {
                id: "mana_potion".to_string(),
                name: "Mana Potion".to_string(),
                description: "Restores 25 MP.".to_string(),
                category: ItemCategory::Consumable,
                base_rarity: Rarity::Common,
                equip_slot: None,
                weapon_type: None,
                armor_type: None,
                consumable_effect: Some(ConsumableEffect::RestoreMP(25)),
                base_damage: 0,
                base_armor: 0,
                affixes: vec![],
                synergy_tags: vec![],
                grid_size: (1, 1),
                glyph: '!',
                max_stack: 10,
                value: 30,
            },
            ItemTemplate {
                id: "antidote".to_string(),
                name: "Antidote".to_string(),
                description: "Cures poison.".to_string(),
                category: ItemCategory::Consumable,
                base_rarity: Rarity::Common,
                equip_slot: None,
                weapon_type: None,
                armor_type: None,
                consumable_effect: Some(ConsumableEffect::CurePoison),
                base_damage: 0,
                base_armor: 0,
                affixes: vec![],
                synergy_tags: vec![],
                grid_size: (1, 1),
                glyph: '!',
                max_stack: 5,
                value: 20,
            },
            ItemTemplate {
                id: "scroll_teleport".to_string(),
                name: "Scroll of Teleportation".to_string(),
                description: "Teleports to a random location on the floor.".to_string(),
                category: ItemCategory::Consumable,
                base_rarity: Rarity::Uncommon,
                equip_slot: None,
                weapon_type: None,
                armor_type: None,
                consumable_effect: Some(ConsumableEffect::Teleport),
                base_damage: 0,
                base_armor: 0,
                affixes: vec![],
                synergy_tags: vec![],
                grid_size: (1, 1),
                glyph: '?',
                max_stack: 3,
                value: 75,
            },
            ItemTemplate {
                id: "scroll_mapping".to_string(),
                name: "Scroll of Mapping".to_string(),
                description: "Reveals the entire floor.".to_string(),
                category: ItemCategory::Consumable,
                base_rarity: Rarity::Rare,
                equip_slot: None,
                weapon_type: None,
                armor_type: None,
                consumable_effect: Some(ConsumableEffect::RevealMap),
                base_damage: 0,
                base_armor: 0,
                affixes: vec![],
                synergy_tags: vec![],
                grid_size: (1, 1),
                glyph: '?',
                max_stack: 3,
                value: 100,
            },
        ],
    }
}
